<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Um Jogo de Amor para Voc√™! ‚ù§Ô∏è</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            overflow: hidden; 
        }
        .heart {
            position: absolute;
            cursor: pointer;
            user-select: none;
            transition: transform 0.1s ease-out, opacity 0.3s ease-out;
            z-index: 10; 
            animation: fadeInOut 2s forwards; 
            touch-action: manipulation; 
        }

       
        @keyframes fadeInOut {
            0% { opacity: 0; transform: scale(0.5); }
            20% { opacity: 1; transform: scale(1); }
            80% { opacity: 1; transform: scale(1); }
            100% { opacity: 0; transform: scale(0.5); }
        }

        
        .heart-clicked {
            animation: popAndFade 0.25s forwards;
        }

        @keyframes popAndFade {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.3); opacity: 0.8; }
            100% { transform: scale(0.5); opacity: 0; }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-purple-400 via-pink-500 to-red-500 min-h-screen flex flex-col items-center justify-center text-white p-4">

    <audio id="audioPositivo" src="som_positivo.mp3" preload="auto"></audio>
    <audio id="audioNegativo" src="som_negativo.mp3" preload="auto"></audio>

    <div id="game-container" class="relative w-full max-w-4xl h-[calc(100vh-120px)] bg-white bg-opacity-20 rounded-2xl shadow-xl flex flex-col items-center justify-center overflow-hidden border-4 border-white border-opacity-30">

        <div id="header-area" class="absolute top-4 left-0 right-0 flex flex-col items-center z-20 space-y-2 px-2"> 
            <div id="score-display" class="bg-white bg-opacity-30 text-white text-xl sm:text-2xl font-bold py-1 px-4 sm:py-2 sm:px-6 rounded-full shadow-lg">Pontos: 0</div>
            <div id="message-display" class="text-2xl sm:text-3xl lg:text-4xl font-extrabold text-center drop-shadow-lg p-2 rounded-lg bg-black bg-opacity-30 max-w-xl mx-auto">
                Clique nos cora√ß√µes!
            </div>
            <div id="timer-display" class="bg-white bg-opacity-30 text-white text-lg sm:text-xl font-bold py-1 px-4 rounded-full shadow-md">Tempo: 60s</div>
        </div>
        
        <div id="pre-game-intro" class="absolute inset-0 bg-black bg-opacity-70 flex flex-col items-center justify-center p-4 rounded-2xl z-40">
            <h2 class="text-3xl sm:text-5xl font-extrabold text-pink-300 text-center mb-6 drop-shadow-2xl">
                Feliz Dia dos Namorados, meu Amor!
            </h2>
            <p class="text-lg sm:text-xl md:text-2xl font-bold text-white text-center mb-8 max-w-2xl leading-relaxed">
                Neste jogo, voc√™ ter√° **60 segundos** para clicar em cora√ß√µes e revelar uma mensagem secreta sobre o nosso amor!
                <br><br>
                ‚ù§Ô∏è Cora√ß√µes vermelhos: Ganhe **1 ponto** e revele parte da mensagem.
                <br>
                üíî Cora√ß√µes partidos: Cuidado! Voc√™ perde **2 pontos**.
                <br><br>
                Tente alcan√ßar **30 pontos** para uma mensagem b√¥nus especial, e se conseguir **50 pontos**, uma surpresa deliciosa te espera!
                <br><br>
                Pronta para desvendar nosso amor?
            </p>
            <button id="start-button" class="bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-6 sm:py-4 sm:px-8 rounded-full shadow-lg transform transition-transform duration-200 hover:scale-105 text-xl sm:text-2xl">
                Come√ßar o Jogo!
            </button>
        </div>


        <div id="final-message-overlay" class="absolute inset-0 bg-black bg-opacity-70 flex flex-col items-center justify-center p-4 rounded-2xl hidden z-40">
            <h2 class="text-3xl sm:text-5xl lg:text-6xl font-extrabold text-pink-300 text-center mb-4 sm:mb-6 drop-shadow-2xl">
                Voc√™ √© Incr√≠vel!
            </h2>
            <p id="full-love-message" class="text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-white text-center mb-6 sm:mb-8 max-w-2xl leading-relaxed">
                </p>
            <button id="restart-button" class="bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-5 sm:py-3 sm:px-6 rounded-full shadow-lg transform transition-transform duration-200 hover:scale-105 text-lg sm:text-xl">
                Jogar Novamente
            </button>
        </div>

        </div>

    <div id="custom-modal-container" class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50 hidden p-4">
        <div class="bg-white p-6 sm:p-8 rounded-xl shadow-2xl text-gray-800 text-center max-w-sm w-full">
            <p id="custom-modal-text" class="text-lg sm:text-xl mb-4"></p>
            <button id="custom-modal-close" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-5 rounded-full text-base sm:text-lg">OK</button>
        </div>
    </div>


    <script>
        const gameContainer = document.getElementById('game-container');
        const scoreDisplay = document.getElementById('score-display');
        const messageDisplay = document.getElementById('message-display');
        const timerDisplay = document.getElementById('timer-display');
        const preGameIntro = document.getElementById('pre-game-intro'); 
        const startButton = document.getElementById('start-button');
        const finalMessageOverlay = document.getElementById('final-message-overlay');
        const fullLoveMessageDisplay = document.getElementById('full-love-message');
        const restartButton = document.getElementById('restart-button');
        const customModalContainer = document.getElementById('custom-modal-container');
        const customModalText = document.getElementById('custom-modal-text');
        const customModalCloseButton = document.getElementById('custom-modal-close');
        const headerArea = document.getElementById('header-area'); 

        const audioPositivo = document.getElementById('audioPositivo');
        const audioNegativo = document.getElementById('audioNegativo');

        // --- Configura√ß√µes do Jogo ---
        let score = 0;
        let gameDuration = 60; // Segundos
        let timeRemaining = gameDuration;
        let heartInterval;
        let timerInterval;
        let currentMessageIndex = 0;
        const loveMessage = "VOC√ä FAZ MINHA VIDA MAIS COLORIDA, TE AMO!";
        const messageParts = loveMessage.split(' ');
        let heartsOnScreen = 0;
        const maxHearts = 10;
        const limiteDePontosParaMensagemSecreta = 30;
        const limiteDePontosParaValeSushi = 50;

        // Fun√ß√£o para mostrar um modal personalizado (substitui alert())
        function showModal(message) {
            customModalText.textContent = message;
            customModalContainer.classList.remove('hidden');
        }

        // Event listener para fechar o modal
        customModalCloseButton.addEventListener('click', () => {
            customModalContainer.classList.add('hidden');
        });

        // Fun√ß√£o para tocar um som
        function playSound(audioElement) {
            audioElement.currentTime = 0;
            audioElement.play();
        }

        // Fun√ß√£o para criar um cora√ß√£o
        function createHeart() {
            if (heartsOnScreen >= maxHearts) {
                return;
            }

            const heart = document.createElement('div');
            const isGoodHeart = Math.random() < 0.6; // Probabilidade de ser um cora√ß√£o bom

            if (isGoodHeart) {
                heart.classList.add('bg-rose-500');
                heart.textContent = '‚ù§Ô∏è';
                heart.dataset.type = 'good';
            } else {
                heart.classList.add('bg-gray-700', 'text-gray-300');
                heart.textContent = 'üíî';
                heart.dataset.type = 'bad';
            }

            heart.classList.add('heart', 'absolute', 'rounded-full', 'flex', 'items-center', 'justify-center', 'text-white', 'font-bold', 'select-none', 'text-4xl', 'sm:text-5xl', 'shadow-lg');
            heart.style.width = '60px';
            heart.style.height = '60px';

            const containerRect = gameContainer.getBoundingClientRect();
            const heartSize = 60;
            const padding = 10;

            const currentHeaderHeight = headerArea.offsetHeight + 10; 
            
            const minX = padding;
            const maxX = containerRect.width - heartSize - padding;
            let minY = currentHeaderHeight + padding; 
            const maxY = containerRect.height - heartSize - padding; 

            if (minY >= maxY) {
                minY = Math.max(minY, containerRect.height - heartSize - padding - 20); 
            }

            const randomX = Math.random() * (maxX - minX) + minX;
            const randomY = Math.random() * (maxY - minY) + minY;

            heart.style.left = `${randomX}px`;
            heart.style.top = `${randomY}px`;

            gameContainer.appendChild(heart);
            heartsOnScreen++;

            const lifetime = setTimeout(() => {
                if (heart.parentNode) {
                    heart.classList.add('heart-clicked');
                    heart.addEventListener('animationend', () => {
                        if (heart.parentNode) {
                            heart.parentNode.removeChild(heart);
                            heartsOnScreen--;
                        }
                    }, { once: true });
                }
            }, 2000);

            heart.addEventListener('click', (event) => {
                const heartType = event.target.dataset.type;

                if (heartType === 'good') {
                    score++;
                    playSound(audioPositivo);
                    if (currentMessageIndex < messageParts.length) {
                        const revealedPart = messageParts.slice(0, currentMessageIndex + 1).join(' ');
                        messageDisplay.textContent = revealedPart;
                        currentMessageIndex++;
                    } else {
                        messageDisplay.textContent = loveMessage;
                    }
                } else if (heartType === 'bad') {
                    score = Math.max(0, score - 2);
                    playSound(audioNegativo);
                    showModal("Oh n√£o! Cora√ß√£o partido! Voc√™ perdeu 2 pontos.");
                }

                scoreDisplay.textContent = `Pontos: ${score}`;

                heart.classList.add('heart-clicked');
                clearTimeout(lifetime);

                heart.addEventListener('animationend', () => {
                    if (heart.parentNode) {
                        heart.parentNode.removeChild(heart);
                        heartsOnScreen--;
                    }
                }, { once: true });
            });
        }

        // Fun√ß√£o para iniciar o jogo (modificada para esconder a introdu√ß√£o)
        function startGame() {
            score = 0;
            timeRemaining = gameDuration;
            currentMessageIndex = 0;
            heartsOnScreen = 0;

            scoreDisplay.textContent = `Pontos: ${score}`;
            messageDisplay.textContent = "Clique nos cora√ß√µes!";
            timerDisplay.textContent = `Tempo: ${timeRemaining}s`;

            // NOVO: Esconde a tela de introdu√ß√£o
            preGameIntro.classList.add('hidden'); 
            // REMOVIDO: startButton.classList.add('hidden');
            // REMOVIDO: instructionMessage.classList.add('hidden');
            finalMessageOverlay.classList.add('hidden');
            
            gameContainer.style.height = `calc(100vh - 120px)`; 

            gameContainer.querySelectorAll('.heart').forEach(h => h.remove());

            heartInterval = setInterval(createHeart, 600);

            timerInterval = setInterval(() => {
                timeRemaining--;
                timerDisplay.textContent = `Tempo: ${timeRemaining}s`;

                if (timeRemaining <= 0) {
                    endGame();
                }
            }, 1000);
        }

        // Fun√ß√£o para finalizar o jogo
        function endGame() {
            clearInterval(heartInterval);
            clearInterval(timerInterval);

            gameContainer.querySelectorAll('.heart').forEach(heart => {
                heart.classList.add('heart-clicked');
                heart.addEventListener('animationend', () => {
                    if (heart.parentNode) {
                        heart.parentNode.removeChild(heart);
                    }
                }, { once: true });
            });

            showFinalMessage();
        }

        // Fun√ß√£o para exibir a tela de mensagem final
        function showFinalMessage() {
            let finalMessageHtml = `
                <span class="text-purple-200">Voc√™ √© a luz do meu dia, a raz√£o do meu sorriso.</span><br>
                <span class="text-pink-200">${loveMessage}</span><br>
                <span class="text-rose-200">Com todo o meu amor, Seu Noivo Kadu!</span>
            `;

            if (score >= limiteDePontosParaValeSushi) {
                finalMessageHtml += `
                    <br><br>
                    <span class="text-green-300 text-2xl sm:text-3xl font-extrabold animate-pulse">
                        üç£ VOC√ä GANHOU UM VALE-SUSHI E 1 HORA DAQUELA MASSAGEM ESPECIAL! üç£
                    </span>
                    <span class="text-white text-lg sm:text-xl mt-4">
                        Parab√©ns, meu amor! Sua dedica√ß√£o foi recompensada! 
                        Prepare-se para um jantar com um sushi maravilhoso! 
                        Mas n√£o se esque√ßa que voc√™ ser√° a sombrimesa!
                    </span>
                `;
            } else if (score >= limiteDePontosParaMensagemSecreta) {
                finalMessageHtml += `
                    <br><br>
                    <span class="text-yellow-300 text-2xl sm:text-3xl font-extrabold animate-pulse">
                        ‚≠ê B√îNUS! VOC√ä DESBLOQUEOU UMA MENSAGEM SECRETA! ‚≠ê
                    </span>
                    <span class="text-white text-lg sm:text-xl mt-4">
                        Cada ponto que voc√™ fez √© um momento de alegria que vivemos juntos. 
                        Este jogo √© um lembrete do quanto sua alegria ilumina a minha vida. 
                        Obrigado por cada risada, cada abra√ßo, cada 'eu te amo'.
                        Voc√™ √© meu maior presente, hoje e sempre!
                        Feliz Dia dos Namorados, meu amor!
                    </span>
                `;
            } else {
                finalMessageHtml += `
                    <br><br>
                    <span class="text-blue-300 text-2xl sm:text-3xl font-extrabold">
                        ü§î Faltou pouco para uma mensagem super secreta! ü§î
                    </span>
                    <span class="text-white text-lg sm:text-xl mt-4">
                        Tente novamente e supere os ${limiteDePontosParaMensagemSecreta} pontos para descobrir o que te espera! 
                        Seu amor √© um enigma que adoro desvendar! ‚ù§Ô∏è
                    </span>
                `;
            }

            fullLoveMessageDisplay.innerHTML = finalMessageHtml;
            finalMessageOverlay.classList.remove('hidden');
            finalMessageOverlay.classList.add('flex');
        }


        // Event listeners para os bot√µes
        startButton.addEventListener('click', startGame);
        restartButton.addEventListener('click', startGame);

        function adjustGameContainerSize() {
            gameContainer.style.height = `calc(100vh - 120px)`; 
        }

        window.addEventListener('load', adjustGameContainerSize);
        window.addEventListener('resize', adjustGameContainerSize);

    </script>
</body>
</html>
